{"ast":null,"code":"import React,{useEffect,useMemo,useRef,useState}from\"react\";import'./style.css';// style.cssã‚’å†åº¦æœ‰åŠ¹åŒ–\nimport{nowInSec,SkyWayAuthToken,SkyWayContext,SkyWayRoom,SkyWayStreamFactory,uuidV4,RemoteDataStream,// RemoteDataStreamã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\nRemoteVideoStream,// RemoteVideoStreamã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\nRemoteAudioStream// RemoteAudioStreamã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\n}from'@skyway-sdk/room';/**\r\n * ãƒ›ãƒ¼ãƒ ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\r\n * @param {object} props - ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£\r\n * @param {function} props.setIsLoggedIn - ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’è¨­å®šã™ã‚‹é–¢æ•°\r\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Home(_ref){let{setIsLoggedIn}=_ref;// ãƒ«ãƒ¼ãƒ å\nconst[roomName,setRoomName]=useState(\"\");// è‡ªåˆ†ã®å‚åŠ è€…æƒ…å ± (ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã™ã‚‹ã¨è¨­å®šã•ã‚Œã¾ã™)\nconst[me,setMe]=useState(null);// SkyWayã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\nconst[skywayContext,setSkywayContext]=useState(null);// SkyWayãƒ«ãƒ¼ãƒ ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\nconst[skywayRoom,setSkywayRoom]=useState(null);// ãƒªãƒ¢ãƒ¼ãƒˆãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®Map (memberId -> videoElement)\nconst remoteVideoElements=useRef(new Map());// ãƒªãƒ¢ãƒ¼ãƒˆãƒ“ãƒ‡ã‚ªã‚’è¡¨ç¤ºã™ã‚‹DOMè¦ç´ ã¸ã®å‚ç…§\nconst robotDisplayRef=useRef(null);// ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å‚ç…§ã‚’ä¿æŒ\nconst localStreamRef=useRef(null);// å—ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®çŠ¶æ…‹\nconst[setReceivedMessages]=useState([]);// é€ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å‚ç…§ã‚’ä¿æŒ\nconst localDataStreamRef=useRef(null);// LocalDataStreamã®å‚ç…§ã‚’ä¿æŒ\n// ãƒã‚¤ã‚¯ã®çŠ¶æ…‹ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®çŠ¶æ…‹ (ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚’ç®¡ç†)\nconst[isMuted,setIsMuted]=useState(false);// ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã®Publicationã‚’ä¿æŒã™ã‚‹ãŸã‚ã®å‚ç…§\nconst audioPublicationRef=useRef(null);// ç¾åœ¨ã®è¨€èªçŠ¶æ…‹ ('japanese' ã¾ãŸã¯ 'english')\nconst[currentLanguage,setCurrentLanguage]=useState('japanese');// AIãƒ¢ãƒ¼ãƒ‰ãŒONã‹ã©ã†ã‹ã‚’ç®¡ç†ã™ã‚‹çŠ¶æ…‹\nconst[isAiModeOn,setIsAiModeOn]=useState(false);// AIã‹ã‚‰ã®ææ¡ˆã‚’ä¿æŒã™ã‚‹çŠ¶æ…‹\n// { key: 'ai_suggestion_1', text: 'ææ¡ˆå†…å®¹' } ã®å½¢å¼ã§æ ¼ç´\nconst[aiSuggestions,setAiSuggestions]=useState([null,null]);// 2ã¤ã®ææ¡ˆã‚’ä¿æŒã™ã‚‹ãŸã‚ã€åˆæœŸå€¤ã‚’nullã§åŸ‹ã‚ã‚‹\n// ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãŒé€²è¡Œä¸­ã‹ã©ã†ã‹ã‚’ç®¡ç†ã™ã‚‹çŠ¶æ…‹\nconst[isMoveInProgress,setIsMoveInProgress]=useState(false);// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã®å¤šè¨€èªãƒãƒƒãƒ”ãƒ³ã‚°\nconst messages=useMemo(()=>({hello:{japanese:'ãƒªã‚»ãƒƒãƒˆ',english:'Hello'},goodbye:{japanese:'æ±ºã‚ãƒãƒ¼ã‚º',english:'Goodbye'},bow:{japanese:'ãƒã‚¤ãƒã‚¤',english:'Bow'},flap:{japanese:'YES',english:'Flap'},lookUp:{japanese:'NO',english:'Look up'},lookDown:{japanese:'å³æ‰‹ã‚’ä¸Šã’ã‚‹',english:'Look down'},lookRight:{japanese:'å³æ‰‹ã‚’ä¸‹ã’ã‚‹',english:'Look right'},lookLeft:{japanese:'å·¦æ‰‹ã‚’ä¸Šã’ã‚‹',english:'Left hand up'// Changed from 'Look left' for clarity\n},nod:{japanese:'å·¦æ‰‹ã‚’ä¸‹ã’ã‚‹',english:'Left hand down'// Changed from 'Nod' for clarity\n},tiltHead:{japanese:'ä¸Šã‚’å‘ã',english:'Look up'// Changed from 'Tilt head' for clarity\n},spin:{japanese:'ä¸‹ã‚’å‘ã',english:'Look down'// Changed from 'Spin' for clarity\n},jump:{japanese:'å³ã‚’å‘ã',english:'Look right'// Changed from 'Jump' for clarity\n},dance:{japanese:'å·¦ã‚’å‘ã',english:'Look left'// Changed from 'Dance' for clarity\n},bowDeep:{japanese:'ãƒ‘ã‚¿ãƒ‘ã‚¿',english:'Flap arms'// Changed from 'Deep bow' for clarity\n},doingSomething:{japanese:'ã“ã‚“ã«ã¡ã¯',english:'Hello'},thankYou:{japanese:'ãƒã‚¤ãƒã‚¤',english:'Goodbye'// Changed from 'Thank you' for clarity\n},good:{japanese:'ã‚ˆã†ã“ã',english:'Welcome'// Changed from 'Good' for clarity\n},ookini:{japanese:'ã‚ã‚ŠãŒã¨ã†',english:'Thank you (Kansai dialect)'},amazing:{japanese:'æ¥½ã—ã‚“ã§ã­',english:'Enjoy'// Changed from 'Amazing' for clarity\n}}),[]);/**\r\n   * ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ãƒãƒ³ãƒ‰ãƒ©\r\n   */const handleLogout=()=>{setIsLoggedIn(false);// ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’falseã«è¨­å®š\n};// SkyWay App ID ã¨ Secret Key\n// æ³¨æ„: æœ¬ç•ªç’°å¢ƒã§ã¯ã€ã“ã‚Œã‚‰ã®ã‚­ãƒ¼ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã›ãšã€\n// ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«å®‰å…¨ã«æ¸¡ã™ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚\nconst appId=useMemo(()=>\"4490dcb5-dbe8-4028-ba0a-6d0d143e4515\",[]);const secretKey=useMemo(()=>\"40HHGEIOx0BRByPdxqwUswK0a+7v2JaeaJ9CcFjMdAQ=\",[]);// SkyWayèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®ç”Ÿæˆ\nconst token=useMemo(()=>{if(appId==null||secretKey==null)return undefined;return new SkyWayAuthToken({jti:uuidV4(),// JWT ID\niat:nowInSec(),// ç™ºè¡Œæ™‚åˆ»\nexp:nowInSec()+60*60*24,// æœ‰åŠ¹æœŸé™ (24æ™‚é–“)\nversion:3,scope:{appId:appId,rooms:[{name:\"*\",// ã™ã¹ã¦ã®ãƒ«ãƒ¼ãƒ åã«é©ç”¨\nmethods:[\"create\",\"close\",\"updateMetadata\"],// ãƒ«ãƒ¼ãƒ æ“ä½œã®æ¨©é™\nmember:{name:\"*\",// ã™ã¹ã¦ã®ãƒ¡ãƒ³ãƒãƒ¼ã«é©ç”¨\nmethods:[\"publish\",\"subscribe\",\"updateMetadata\"]// ãƒ¡ãƒ³ãƒãƒ¼æ“ä½œã®æ¨©é™\n}}],turn:{enabled:true// TURNã‚µãƒ¼ãƒãƒ¼ã®ä½¿ç”¨ã‚’è¨±å¯ (NATè¶Šãˆã®ãŸã‚)\n}}}).encode(secretKey);},[appId,secretKey]);/**\r\n   * SkyWayContextã®åˆæœŸåŒ–ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’è¡Œã†useEffect\r\n   * ãƒˆãƒ¼ã‚¯ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã«ãªã£ãŸã¨ãã«ä¸€åº¦ã ã‘å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚\r\n   */useEffect(()=>{if(!token)return;let currentContext;const initContext=async()=>{try{currentContext=await SkyWayContext.Create(token);setSkywayContext(currentContext);console.log(\"SkyWayContext created successfully.\");}catch(error){console.error(\"Failed to create SkyWayContext:\",error);}};initContext();// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç ´æ£„\nreturn()=>{if(currentContext){currentContext.dispose();console.log(\"SkyWayContext disposed.\");}};},[token]);// tokenãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«ã®ã¿å®Ÿè¡Œ\n/**\r\n   * ãƒªãƒ¢ãƒ¼ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’DOMã«è¿½åŠ ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°\r\n   * @param {RemoteVideoStream | RemoteAudioStream} stream - è¿½åŠ ã™ã‚‹ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒªãƒ¼ãƒ \r\n   * @param {string} memberId - ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ãƒ¼ã®ãƒ¡ãƒ³ãƒãƒ¼ID\r\n   */const attachRemoteStream=(stream,memberId)=>{if(robotDisplayRef.current&&(stream instanceof RemoteVideoStream||stream instanceof RemoteAudioStream)){// æ—¢å­˜ã®ãƒ“ãƒ‡ã‚ªè¦ç´ ãŒã‚ã‚Œã°å‰Šé™¤\nconst existingVideo=remoteVideoElements.current.get(memberId);if(existingVideo){robotDisplayRef.current.removeChild(existingVideo);remoteVideoElements.current.delete(memberId);}const video=document.createElement(\"video\");video.autoplay=true;// è‡ªå‹•å†ç”Ÿ\nvideo.playsInline=true;// ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å†ç”Ÿ (iOSãªã©ã§å¿…è¦)\nvideo.className=\"remote-video object-cover\";// ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ç”¨ã®ã‚¯ãƒ©ã‚¹ã¨object-coverã‚’è¿½åŠ \nvideo.dataset.memberId=memberId;// ãƒ¡ãƒ³ãƒãƒ¼IDã‚’ãƒ‡ãƒ¼ã‚¿å±æ€§ã«ä¿å­˜\nstream.attach(video);// ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ãƒ“ãƒ‡ã‚ªè¦ç´ ã®ã‚½ãƒ¼ã‚¹ã«è¨­å®š\nrobotDisplayRef.current.appendChild(video);remoteVideoElements.current.set(memberId,video);console.log(\"Attached stream from \".concat(memberId,\" to DOM.\"));}else{console.warn(\"Attempted to attach non-media stream or robotDisplayRef is null for member \".concat(memberId,\".\"));}};/**\r\n   * ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å—ä¿¡ã‚’å‡¦ç†ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°\r\n   * @param {RemoteDataStream} stream - å—ä¿¡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ \r\n   * @param {string} memberId - ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ãƒ¼ã®ãƒ¡ãƒ³ãƒãƒ¼ID\r\n   */const handleDataStream=(stream,memberId)=>{if(stream instanceof RemoteDataStream){stream.onData.add(data=>{console.log(\"Received data from \".concat(memberId,\":\"),data);// å—ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çŠ¶æ…‹ã«è¿½åŠ \nsetReceivedMessages(prevMessages=>[...prevMessages,{senderId:memberId,message:data}]);// \"move_finish\" ã‚·ã‚°ãƒŠãƒ«ã‚’ãƒã‚§ãƒƒã‚¯\nif(data===\"move_finish\"){console.log(\"Received 'move_finish' signal. Enabling side panel buttons.\");setIsMoveInProgress(false);// ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†\n}// AIææ¡ˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ãƒã‚§ãƒƒã‚¯\n// æ–°ã—ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ \"ai_assist_1:data:ai_assist_2:data\" ã‚’è§£æ\nconst aiCombinedSuggestionRegex=/^ai_assist_1:(.*):ai_assist_2:(.*)$/;const combinedMatch=String(data).match(aiCombinedSuggestionRegex);if(combinedMatch){const suggestion1Content=combinedMatch[1];// ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚°ãƒ«ãƒ¼ãƒ—1ãŒæœ€åˆã®ææ¡ˆ\nconst suggestion2Content=combinedMatch[2];// ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚°ãƒ«ãƒ¼ãƒ—2ãŒ2ç•ªç›®ã®ææ¡ˆ\nsetAiSuggestions([{key:'ai_suggestion_1',text:suggestion1Content},{key:'ai_suggestion_2',text:suggestion2Content}]);console.log(\"Received combined AI suggestions.\");}else{// ä»¥å‰ã®å˜ä¸€ææ¡ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚‚è€ƒæ…®ã™ã‚‹å ´åˆï¼ˆã‚‚ã—ä¸¡æ–¹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒæ··åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãªã‚‰ï¼‰\nconst aiSingleSuggestionRegex=/^ai_assist_(\\d+):(.*)$/;const singleMatch=String(data).match(aiSingleSuggestionRegex);if(singleMatch){const suggestionNumber=parseInt(singleMatch[1],10);const suggestionContent=singleMatch[2];if(suggestionNumber===1||suggestionNumber===2){setAiSuggestions(prevSuggestions=>{const newSuggestions=[...prevSuggestions];newSuggestions[suggestionNumber-1]={key:\"ai_suggestion_\".concat(suggestionNumber),text:suggestionContent};return newSuggestions;});console.log(\"Received single AI suggestion \".concat(suggestionNumber,\".\"));}}}});console.log(\"Listening for data from \".concat(memberId,\".\"));}else{console.warn(\"Attempted to handle non-data stream as data stream for member \".concat(memberId,\".\"));}};/**\r\n   * ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã™ã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   * SkyWayContextãŒåˆæœŸåŒ–ã•ã‚Œã€ãƒ«ãƒ¼ãƒ åãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚\r\n   */const handleJoinRoom=async()=>{if(!skywayContext){console.error(\"SkyWayContext is not initialized. Please wait or check token.\");return;}if(!roomName){console.error(\"Room name is empty. Please enter a room name to join.\");return;}if(skywayRoom&&me){console.warn(\"Already in a room. Please leave the current room first.\");return;}try{// æŒ‡å®šã•ã‚ŒãŸãƒ«ãƒ¼ãƒ åã§P2Pãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã¾ãŸã¯æ¤œç´¢\nconst room=await SkyWayRoom.FindOrCreate(skywayContext,{type:\"p2p\",// P2Pãƒ«ãƒ¼ãƒ ã‚¿ã‚¤ãƒ—\nname:roomName});// roomã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª\nif(!room){console.error(\"SkyWayRoom.FindOrCreate returned null or undefined room.\");throw new Error(\"Failed to create or find SkyWayRoom.\");}setSkywayRoom(room);console.log(\"SkyWayRoom '\".concat(roomName,\"' found or created.\"));// ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã€è‡ªåˆ†ã®ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’å–å¾—\nconst localMember=await room.join();// localMemberãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª\nif(!localMember){console.error(\"room.join() returned null or undefined localMember.\");throw new Error(\"Failed to join the room.\");}setMe(localMember);console.log(\"Joined room '\".concat(roomName,\"' as member ID: \").concat(localMember.id));// ãƒ«ãƒ¼ãƒ IDã¨è‡ªåˆ†ã®IDã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤º\nconsole.log(\"Room ID: \".concat(roomName,\" / My ID: \").concat(localMember.id));// è‡ªåˆ†ã®ã‚«ãƒ¡ãƒ©ã¨ãƒã‚¤ã‚¯ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œæˆã—ã€å…¬é–‹\nconst{audio,video}=await SkyWayStreamFactory.createMicrophoneAudioAndCameraStream();localStreamRef.current=video;// ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä¿å­˜\nawait localMember.publish(video);const publication_audio=await localMember.publish(audio);audioPublicationRef.current=publication_audio;// ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªPublicationã‚’ä¿å­˜\nsetIsMuted(false);console.log(\"Published local camera and microphone stream.\");// è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œæˆã—ã€å…¬é–‹\nconst dataStream=await SkyWayStreamFactory.createDataStream();localDataStreamRef.current=dataStream;// ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä¿å­˜\nawait localMember.publish(dataStream);console.log(\"Published local data stream.\");// ãƒ«ãƒ¼ãƒ å‚åŠ æ™‚ã¯ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹ï¼ˆãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã¾ã å§‹ã¾ã£ã¦ã„ãªã„ãŸã‚ï¼‰\nsetIsMoveInProgress(false);// --- æ—¢å­˜ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è³¼èª­ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ ---\n// ãƒ«ãƒ¼ãƒ å†…ã®æ—¢å­˜ã®å…¬é–‹ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ã™ã¹ã¦è³¼èª­ã™ã‚‹\nfor(const publication of room.publications){// è‡ªåˆ†ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯è³¼èª­ã—ãªã„\nif(localMember.id===publication.publisher.id){continue;}try{const{stream}=await localMember.subscribe(publication.id);console.log(\"Subscribed to existing stream from \".concat(publication.publisher.id,\", type: \").concat(publication.contentType));if(publication.contentType==='video'||publication.contentType==='audio'){attachRemoteStream(stream,publication.publisher.id);}else if(publication.contentType==='data'){handleDataStream(stream,publication.publisher.id);}else{console.warn(\"Unknown stream content type: \".concat(publication.contentType,\" from \").concat(publication.publisher.id));}}catch(subscribeError){console.error(\"Failed to subscribe to existing stream from \".concat(publication.publisher.id,\":\"),subscribeError);}}// --- ãƒ«ãƒ¼ãƒ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š ---\n// ãƒ¡ãƒ³ãƒãƒ¼ãŒãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ\nif(room.onMemberJoined){room.onMemberJoined.add(e=>{console.log(\"Member joined: \".concat(e.member.id));});}else{console.error(\"room.onMemberJoined is undefined. This is unexpected.\");}// ãƒ¡ãƒ³ãƒãƒ¼ãŒãƒ«ãƒ¼ãƒ ã‚’é›¢è„±ã—ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ\nif(room.onMemberLeft){room.onMemberLeft.add(e=>{console.log(\"Member left: \".concat(e.member.id));// è©²å½“ãƒ¡ãƒ³ãƒãƒ¼ã®ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’DOMã‹ã‚‰å‰Šé™¤ã—ã€Mapã‹ã‚‰ã‚‚å‰Šé™¤\nconst videoElement=remoteVideoElements.current.get(e.member.id);if(videoElement&&robotDisplayRef.current){robotDisplayRef.current.removeChild(videoElement);remoteVideoElements.current.delete(e.member.id);console.log(\"Removed video for member \".concat(e.member.id));}// ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ é–¢é€£ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚‚ã“ã“ã«è¿½åŠ å¯èƒ½ã§ã™ãŒã€\n// onDataãƒªã‚¹ãƒŠãƒ¼ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã¨è‡ªå‹•çš„ã«åœæ­¢ã—ã¾ã™ã€‚\n});}else{console.error(\"room.onMemberLeft is undefined. This is unexpected.\");}// ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒå…¬é–‹ã•ã‚ŒãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ\nif(room.onStreamPublished){room.onStreamPublished.add(async e=>{console.log(\"Stream published by \".concat(e.publication.publisher.id,\", type: \").concat(e.publication.contentType));// è‡ªåˆ†ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯è³¼èª­ã—ãªã„\nif(localMember.id!==e.publication.publisher.id){try{// ãƒªãƒ¢ãƒ¼ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è³¼èª­\nconst{stream}=await localMember.subscribe(e.publication.id);console.log(\"Subscribed to stream from \".concat(e.publication.publisher.id));if(e.publication.contentType==='video'||e.publication.contentType==='audio'){attachRemoteStream(stream,e.publication.publisher.id);}else if(e.publication.contentType==='data'){handleDataStream(stream,e.publication.publisher.id);}else{console.warn(\"Unknown stream content type: \".concat(e.publication.contentType,\" from \").concat(e.publication.publisher.id));}}catch(subscribeError){console.error(\"Failed to subscribe to stream from \".concat(e.publication.publisher.id,\":\"),subscribeError);}}else{console.log(\"Skipping subscription for own stream: \".concat(e.publication.publisher.id));}});}else{console.error(\"room.onStreamPublished is undefined. This is unexpected.\");}// ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒéå…¬é–‹ã«ãªã£ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ\nif(room.onStreamUnpublished){room.onStreamUnpublished.add(e=>{console.log(\"Stream unpublished by \".concat(e.publication.publisher.id));// è©²å½“ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’DOMã‹ã‚‰å‰Šé™¤ã—ã€Mapã‹ã‚‰ã‚‚å‰Šé™¤\nconst videoElement=remoteVideoElements.current.get(e.publication.publisher.id);if(videoElement&&robotDisplayRef.current){robotDisplayRef.current.removeChild(videoElement);remoteVideoElements.current.delete(e.publication.publisher.id);console.log(\"Removed unpublished video for member \".concat(e.publication.publisher.id));}});}else{console.error(\"room.onStreamUnpublished is undefined. This is unexpected.\");}}catch(error){console.error(\"Failed to join room:\",error);// ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦å†è©¦è¡Œå¯èƒ½ã«ã™ã‚‹\nsetSkywayRoom(null);setMe(null);// ã‚¨ãƒ©ãƒ¼æ™‚ã«æ—¢å­˜ã®ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\nif(robotDisplayRef.current){Array.from(robotDisplayRef.current.children).forEach(child=>{if(child.tagName==='VIDEO'){// ãƒ“ãƒ‡ã‚ªè¦ç´ ã®srcObjectã‚’ã‚¯ãƒªã‚¢ã—ã€ãƒˆãƒ©ãƒƒã‚¯ã‚’åœæ­¢\nif(child.srcObject&&typeof child.srcObject.getTracks==='function'){child.srcObject.getTracks().forEach(track=>track.stop());child.srcObject=null;}child.remove();// DOMã‹ã‚‰è¦ç´ ã‚’å‰Šé™¤\n}});}remoteVideoElements.current.clear();if(localStreamRef.current){// LocalVideoStreamã®stop()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™\nif(typeof localStreamRef.current.stop==='function'){localStreamRef.current.stop();console.log(\"Stopped local media stream during join error cleanup.\");}else{console.warn(\"localStreamRef.current is not a valid LocalVideoStream or stop is not a function during join error cleanup.\");}localStreamRef.current=null;}// LocalDataStreamã¯è‡ªå‹•çš„ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ãŸã‚ã€æ˜ç¤ºçš„ãªclose()ã¯ä¸è¦\nlocalDataStreamRef.current=null;// å‚ç…§ã‚’ã‚¯ãƒªã‚¢\nconsole.log(\"Local data stream reference cleared during join error cleanup.\");// ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚‚ãƒªã‚»ãƒƒãƒˆ\nsetIsMuted(false);audioPublicationRef.current=null;setIsMoveInProgress(false);// ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\n}};/**\r\n   * ãƒ«ãƒ¼ãƒ ã‹ã‚‰é€€å‡ºã™ã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   */const handleLeaveRoom=async()=>{if(skywayRoom&&me){try{// ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’åœæ­¢ã—ã€å…¬é–‹ã‚’è§£é™¤\nif(localStreamRef.current){// LocalVideoStreamã®stop()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™\nif(typeof localStreamRef.current.stop==='function'){localStreamRef.current.stop();console.log(\"Stopped local media stream.\");}else{console.warn(\"localStreamRef.current is not a valid LocalVideoStream or stop is not a function during leave.\");}localStreamRef.current=null;}// LocalDataStreamã¯è‡ªå‹•çš„ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ãŸã‚ã€æ˜ç¤ºçš„ãªclose()ã¯ä¸è¦\nlocalDataStreamRef.current=null;// å‚ç…§ã‚’ã‚¯ãƒªã‚¢\nconsole.log(\"Local data stream reference cleared.\");// ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªPublicationã®å‚ç…§ã‚’ã‚¯ãƒªã‚¢\naudioPublicationRef.current=null;setIsMuted(false);// ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\nawait me.leave();// ãƒ«ãƒ¼ãƒ ã‹ã‚‰é€€å‡º\nconsole.log(\"Left room '\".concat(roomName,\"'\"));// ãƒ«ãƒ¼ãƒ é€€å‡ºã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤º\nconsole.log(\"Left room: \".concat(roomName));// room.dispose()ã‚’ä½¿ç”¨\nif(skywayRoom){await skywayRoom.dispose();// ãƒ«ãƒ¼ãƒ ã‚’é–‰ã˜ã‚‹ (ã“ã‚Œã¯ãƒ«ãƒ¼ãƒ ã®ä½œæˆè€…ã®ã¿ãŒåŠ¹æœçš„ã§ã™)\nconsole.log(\"SkyWay Room disposed.\");}// SkyWay SDKã«é–¢ã™ã‚‹ã™ã¹ã¦ã®æ“ä½œãŒä¸è¦ã«ãªã£ãŸå ´åˆã«context.dispose()ã‚’å‘¼ã³å‡ºã™\n// ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹éš›ã«useEffectã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—é–¢æ•°ã§å‡¦ç†ã•ã‚Œã‚‹ãŸã‚ã€ã“ã“ã§ã¯å‘¼ã³å‡ºã•ãªã„\n}catch(error){console.error(\"Failed to leave room:\",error);}finally{// çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\nsetMe(null);setSkywayRoom(null);setReceivedMessages([]);// å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚ã‚¯ãƒªã‚¢\n// ã™ã¹ã¦ã®ãƒªãƒ¢ãƒ¼ãƒˆãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’DOMã‹ã‚‰å‰Šé™¤\nif(robotDisplayRef.current){Array.from(robotDisplayRef.current.children).forEach(child=>{if(child.tagName==='VIDEO'){// ãƒ“ãƒ‡ã‚ªè¦ç´ ã®srcObjectã‚’ã‚¯ãƒªã‚¢ã—ã€ãƒˆãƒ©ãƒƒã‚¯ã‚’åœæ­¢\nif(child.srcObject&&typeof child.srcObject.getTracks==='function'){child.srcObject.getTracks().forEach(track=>track.stop());child.srcObject=null;}child.remove();// DOMã‹ã‚‰è¦ç´ ã‚’å‰Šé™¤\n}});}remoteVideoElements.current.clear();// AIãƒ¢ãƒ¼ãƒ‰ã‚‚ã‚ªãƒ•ã«ã™ã‚‹\nsetIsAiModeOn(false);setAiSuggestions([null,null]);// ææ¡ˆã‚‚ã‚¯ãƒªã‚¢\nsetIsMoveInProgress(false);// ãƒ«ãƒ¼ãƒ é€€å‡ºæ™‚ã‚‚ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\n}}};/**\r\n   * ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ“ä½œã™ã‚‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸæ™‚ã®å‡¦ç†\r\n   * @param {string | object} messageOrKey - é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚­ãƒ¼ (messagesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚­ãƒ¼) ã¾ãŸã¯AIææ¡ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\r\n   */const handleSend=async messageOrKey=>{if(me&&skywayRoom&&localDataStreamRef.current){try{let messageToSend;let shouldSetMoveInProgress=false;// ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³é€²è¡Œä¸­ãƒ•ãƒ©ã‚°ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®æ–°ã—ã„å¤‰æ•°\nif(typeof messageOrKey==='string'){// ã‚µã‚¤ãƒ‰ãƒœã‚¿ãƒ³ã‹ã‚‰ã®é€ä¿¡ã®å ´åˆã€ç›´æ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ–‡å­—åˆ—ã‚’ä½¿ç”¨\nif(messageOrKey.startsWith(\"template_motion_\")){messageToSend=messageOrKey;shouldSetMoveInProgress=true;// ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã®ã¿ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹\n}else if(messageOrKey.startsWith(\"template_voice_\")){messageToSend=messageOrKey;// ãƒœã‚¤ã‚¹ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã¯shouldSetMoveInProgressã‚’trueã«ã—ãªã„\n}else{var _messages$messageOrKe;// æ—¢å­˜ã®messagesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã®ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ— (AIææ¡ˆä»¥å¤–ã§ã‚­ãƒ¼ãŒæ¸¡ã•ã‚ŒãŸå ´åˆãªã©)\nmessageToSend=(_messages$messageOrKe=messages[messageOrKey])===null||_messages$messageOrKe===void 0?void 0:_messages$messageOrKe[currentLanguage];}}else if(typeof messageOrKey==='object'&&messageOrKey.text){// AIææ¡ˆãƒœã‚¿ãƒ³ã‹ã‚‰ã®é€ä¿¡\nmessageToSend=messageOrKey.text;// AIææ¡ˆã®å ´åˆã¯shouldSetMoveInProgressã‚’trueã«ã—ãªã„\n}if(!messageToSend){console.warn(\"Message to send is empty or not found.\");return;}localDataStreamRef.current.write(messageToSend);console.log(\"Sent message: \\\"\".concat(messageToSend,\"\\\"\"));// é€ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚è‡ªèº«ã®ç”»é¢ã«è¡¨ç¤º\nsetReceivedMessages(prevMessages=>[...prevMessages,{senderId:me.id,message:messageToSend,isLocal:true}]);setAiSuggestions([null,null]);// é€ä¿¡ã—ãŸã‚‰ææ¡ˆã‚’ã‚¯ãƒªã‚¢\n// shouldSetMoveInProgressãŒtrueã®å ´åˆã®ã¿ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³é€²è¡Œä¸­çŠ¶æ…‹ã«ã™ã‚‹\nif(shouldSetMoveInProgress){setIsMoveInProgress(true);}// AIææ¡ˆã‚„ãƒœã‚¤ã‚¹ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã¯ã€isMoveInProgressã¯å¤‰æ›´ã—ãªã„\n// (ä»¥å‰ã®ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãŒé€²è¡Œä¸­ã§ã‚ã‚Œã°ãã®ã¾ã¾ã€ãã†ã§ãªã‘ã‚Œã°falseã®ã¾ã¾)\n}catch(error){console.error(\"Failed to send data:\",error);}}else{console.warn(\"Cannot send message: Not in a room, 'me' object is not available, or data stream is not ready.\");}};/**\r\n   * ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆ/ãƒŸãƒ¥ãƒ¼ãƒˆè§£é™¤ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   */const handleMute=async()=>{console.log(\"start\");if(!audioPublicationRef.current){console.warn(\"Audio publication not available. Cannot toggle mute.\");return;}try{if(isMuted){// ç¾åœ¨ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ãªã‚‰ã€ãƒŸãƒ¥ãƒ¼ãƒˆã‚’è§£é™¤\nawait audioPublicationRef.current.enable();console.log(\"Microphone unmuted.\");}else{// ç¾åœ¨ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã§ãªã„ãªã‚‰ã€ãƒŸãƒ¥ãƒ¼ãƒˆ\nawait audioPublicationRef.current.disable();console.log(\"Microphone muted.\");}setIsMuted(!isMuted);// ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«\n}catch(error){console.error(\"Failed to toggle microphone mute state:\",error);}};// AIãƒ¢ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã®ãƒ•ãƒ©ã‚°\nconst isInitialAiModeRender=useRef(true);/**\r\n   * AIãƒ¢ãƒ¼ãƒ‰ã®çŠ¶æ…‹å¤‰æ›´ã‚’ç›£è¦–ã—ã€ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡ã™ã‚‹useEffect\r\n   */useEffect(()=>{// åˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã¯ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡ã—ãªã„\nif(isInitialAiModeRender.current){isInitialAiModeRender.current=false;return;}// me ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª\nif(!me||!localDataStreamRef.current){return;}if(isAiModeOn){// AIãƒ¢ãƒ¼ãƒ‰ãŒONã«ãªã£ãŸã‚‰ã€AIã«ææ¡ˆã‚’è¦æ±‚ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡\nlocalDataStreamRef.current.write(\"ai_assist_on\");console.log(\"Sent AI_MODE_REQUEST_SUGGESTIONS signal.\");setAiSuggestions([null,null]);// æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãŸã‚ã«ææ¡ˆã‚’ã‚¯ãƒªã‚¢\n}else{// AIãƒ¢ãƒ¼ãƒ‰ãŒOFFã«ãªã£ãŸã‚‰ææ¡ˆã‚’ã‚¯ãƒªã‚¢ã—ã€AIãƒ¢ãƒ¼ãƒ‰çµ‚äº†ã®ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡\nlocalDataStreamRef.current.write(\"ai_assist_off\");console.log(\"Sent AI_MODE_OFF_SIGNAL.\");setAiSuggestions([null,null]);// ææ¡ˆã‚’ã‚¯ãƒªã‚¢\n}},[isAiModeOn,me,localDataStreamRef]);// isAiModeOn, me, localDataStreamRef ã®å¤‰æ›´ã«åå¿œ\n/**\r\n   * è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   */const handleToggleLanguage=()=>{setCurrentLanguage(prevLang=>prevLang==='japanese'?'english':'japanese');};/**\r\n   * AIãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   * ã“ã®é–¢æ•°ã¯AIãƒ¢ãƒ¼ãƒ‰ã®çŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹ã®ã¿ã§ã€ã‚·ã‚°ãƒŠãƒ«é€ä¿¡ã¯useEffectã«ä»»ã›ã‚‹\r\n   */const handleAiModeToggle=()=>{setIsAiModeOn(prev=>!prev);};return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-left\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"motion-btn\",disabled:isAiModeOn||isMoveInProgress,children:\"\\u30E2\\u30FC\\u30B7\\u30E7\\u30F3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"robot-status\",children:\"\\u64CD\\u4F5C\\u3057\\u3066\\u3044\\u308B\\u30ED\\u30DC\\u30C3\\u30C8\\uFF1ARX78-myakumyaku\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-right\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\"}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn\",disabled:isAiModeOn||isMoveInProgress,children:\"\\u30DC\\u30A4\\u30B9\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"side-panel\",children:/*#__PURE__*/_jsx(\"div\",{className:\"side-panel-content\",children:Object.keys(messages).slice(0,17).map(key=>/*#__PURE__*/// å·¦å´ã®ãƒœã‚¿ãƒ³æ•°ã‚’èª¿æ•´\n_jsxs(\"button\",{// å·¦å´ã®ãƒœã‚¿ãƒ³ã¯ \"template_motion_ã€‡ã€‡\" å½¢å¼ã§é€ä¿¡\nonClick:()=>handleSend(\"template_motion_\".concat(messages[key].japanese)),className:\"side-btn\",disabled:isAiModeOn||!me||isMoveInProgress// AIãƒ¢ãƒ¼ãƒ‰ä¸­ã€æœªå‚åŠ ã€ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\n,children:[messages[key].japanese,\" \"]},key))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-area\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"room-controls\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u30EB\\u30FC\\u30E0\\u540D\\u3092\\u5165\\u529B\",value:roomName,onChange:e=>setRoomName(e.target.value),className:\"room-input\",disabled:!!me// ãƒ«ãƒ¼ãƒ å‚åŠ ä¸­ã¯å…¥åŠ›ä¸å¯ã«ã™ã‚‹\n}),!me?/*#__PURE__*/// ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¦ã„ãªã„å ´åˆ\n_jsx(\"button\",{onClick:handleJoinRoom,className:\"join-room-btn\",disabled:!skywayContext||!roomName,children:\"\\u30EB\\u30FC\\u30E0\\u306B\\u53C2\\u52A0\"}):/*#__PURE__*/// ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¦ã„ã‚‹å ´åˆ\n_jsx(\"button\",{onClick:handleLeaveRoom,className:\"leave-room-btn\",children:\"\\u30EB\\u30FC\\u30E0\\u3092\\u9000\\u51FA\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"robot-display\",ref:robotDisplayRef,children:(aiSuggestions[0]||aiSuggestions[1])&&/*#__PURE__*/_jsxs(\"div\",{className:\"ai-suggestions\",children:[aiSuggestions[0]&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSend(aiSuggestions[0]),className:\"ai-suggestion-btn\",disabled:isMoveInProgress// ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\n,children:aiSuggestions[0].text}),aiSuggestions[1]&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSend(aiSuggestions[1]),className:\"ai-suggestion-btn\",disabled:isMoveInProgress// ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\n,children:aiSuggestions[1].text})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"side-panel right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"side-panel-content\",children:Object.keys(messages).slice(14).map(key=>/*#__PURE__*/// å³å´ã®ãƒœã‚¿ãƒ³æ•°ã‚’èª¿æ•´\n_jsxs(\"button\",{// å³å´ã®ãƒœã‚¿ãƒ³ã¯ \"template_voice_ã€‡ã€‡\" å½¢å¼ã§é€ä¿¡\nonClick:()=>handleSend(\"template_voice_\".concat(messages[key].japanese)),className:\"side-btn\",disabled:isAiModeOn||!me||isMoveInProgress// AIãƒ¢ãƒ¼ãƒ‰ä¸­ã€æœªå‚åŠ ã€ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\n,children:[messages[key].japanese,\" \"]},key))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-controls\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"control-btn ai-btn \".concat(isAiModeOn?'ai-mode-on':''),onClick:handleAiModeToggle,disabled:!me// ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¦ã„ãªã„å ´åˆã¯ç„¡åŠ¹\n,children:[\"\\uD83E\\uDD16 AI\\u30E2\\u30FC\\u30C9 \",isAiModeOn?'ON':'OFF']}),/*#__PURE__*/_jsxs(\"button\",{className:\"control-btn mic-btn \".concat(isMuted?'muted':'')// ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã«å¿œã˜ã¦ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ \n,onClick:handleMute,id:\"micBtn\",disabled:!me||!audioPublicationRef.current||isAiModeOn// ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¦ã„ãªã„ã€ã¾ãŸã¯ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãŒå…¬é–‹ã•ã‚Œã¦ã„ãªã„ã€AIãƒ¢ãƒ¼ãƒ‰ä¸­ã¯ç„¡åŠ¹\n,children:[isMuted?'ğŸ”‡ ãƒã‚¤ã‚¯ãƒŸãƒ¥ãƒ¼ãƒˆ':'ğŸ¤ ãƒã‚¤ã‚¯ON',\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"control-btn manual-btn\",id:\"manualBtn\",disabled:isAiModeOn||isMoveInProgress,children:\"\\uD83D\\uDCCB \\u30DE\\u30CB\\u30E5\\u30A2\\u30EB\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"control-btn greeting-btn\",id:\"languageBtn\",onClick:handleToggleLanguage// è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒãƒ³ãƒ‰ãƒ©ã‚’è¨­å®š\n,disabled:isAiModeOn||isMoveInProgress// AIãƒ¢ãƒ¼ãƒ‰ä¸­ã€ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\n,children:[\"\\uD83D\\uDC4B \",currentLanguage==='japanese'?'ã«ã»ã‚“ã”':'English',\" \"]})]})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","nowInSec","SkyWayAuthToken","SkyWayContext","SkyWayRoom","SkyWayStreamFactory","uuidV4","RemoteDataStream","RemoteVideoStream","RemoteAudioStream","jsx","_jsx","jsxs","_jsxs","Home","_ref","setIsLoggedIn","roomName","setRoomName","me","setMe","skywayContext","setSkywayContext","skywayRoom","setSkywayRoom","remoteVideoElements","Map","robotDisplayRef","localStreamRef","setReceivedMessages","localDataStreamRef","isMuted","setIsMuted","audioPublicationRef","currentLanguage","setCurrentLanguage","isAiModeOn","setIsAiModeOn","aiSuggestions","setAiSuggestions","isMoveInProgress","setIsMoveInProgress","messages","hello","japanese","english","goodbye","bow","flap","lookUp","lookDown","lookRight","lookLeft","nod","tiltHead","spin","jump","dance","bowDeep","doingSomething","thankYou","good","ookini","amazing","handleLogout","appId","secretKey","token","undefined","jti","iat","exp","version","scope","rooms","name","methods","member","turn","enabled","encode","currentContext","initContext","Create","console","log","error","dispose","attachRemoteStream","stream","memberId","current","existingVideo","get","removeChild","delete","video","document","createElement","autoplay","playsInline","className","dataset","attach","appendChild","set","concat","warn","handleDataStream","onData","add","data","prevMessages","senderId","message","aiCombinedSuggestionRegex","combinedMatch","String","match","suggestion1Content","suggestion2Content","key","text","aiSingleSuggestionRegex","singleMatch","suggestionNumber","parseInt","suggestionContent","prevSuggestions","newSuggestions","handleJoinRoom","room","FindOrCreate","type","Error","localMember","join","id","audio","createMicrophoneAudioAndCameraStream","publish","publication_audio","dataStream","createDataStream","publication","publications","publisher","subscribe","contentType","subscribeError","onMemberJoined","e","onMemberLeft","videoElement","onStreamPublished","onStreamUnpublished","Array","from","children","forEach","child","tagName","srcObject","getTracks","track","stop","remove","clear","handleLeaveRoom","leave","handleSend","messageOrKey","messageToSend","shouldSetMoveInProgress","startsWith","_messages$messageOrKe","write","isLocal","handleMute","enable","disable","isInitialAiModeRender","handleToggleLanguage","prevLang","handleAiModeToggle","prev","disabled","onClick","Object","keys","slice","map","placeholder","value","onChange","target","ref"],"sources":["C:/banpaku_2025/banpaku/src/home.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport './style.css'; // style.cssã‚’å†åº¦æœ‰åŠ¹åŒ–\r\nimport {\r\n  nowInSec,\r\n  SkyWayAuthToken,\r\n  SkyWayContext,\r\n  SkyWayRoom,\r\n  SkyWayStreamFactory,\r\n  uuidV4,\r\n  RemoteDataStream, // RemoteDataStreamã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\r\n  RemoteVideoStream, // RemoteVideoStreamã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\r\n  RemoteAudioStream, // RemoteAudioStreamã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ\r\n} from '@skyway-sdk/room';\r\n\r\n/**\r\n * ãƒ›ãƒ¼ãƒ ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\r\n * @param {object} props - ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£\r\n * @param {function} props.setIsLoggedIn - ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’è¨­å®šã™ã‚‹é–¢æ•°\r\n */\r\nfunction Home({ setIsLoggedIn }) {\r\n  // ãƒ«ãƒ¼ãƒ å\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  // è‡ªåˆ†ã®å‚åŠ è€…æƒ…å ± (ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã™ã‚‹ã¨è¨­å®šã•ã‚Œã¾ã™)\r\n  const [me, setMe] = useState(null);\r\n  // SkyWayã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\r\n  const [skywayContext, setSkywayContext] = useState(null);\r\n  // SkyWayãƒ«ãƒ¼ãƒ ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\r\n  const [skywayRoom, setSkywayRoom] = useState(null);\r\n  // ãƒªãƒ¢ãƒ¼ãƒˆãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®Map (memberId -> videoElement)\r\n  const remoteVideoElements = useRef(new Map());\r\n  // ãƒªãƒ¢ãƒ¼ãƒˆãƒ“ãƒ‡ã‚ªã‚’è¡¨ç¤ºã™ã‚‹DOMè¦ç´ ã¸ã®å‚ç…§\r\n  const robotDisplayRef = useRef(null);\r\n  // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å‚ç…§ã‚’ä¿æŒ\r\n  const localStreamRef = useRef(null);\r\n  // å—ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®çŠ¶æ…‹\r\n  const [setReceivedMessages] = useState([]);\r\n  // é€ä¿¡ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å‚ç…§ã‚’ä¿æŒ\r\n  const localDataStreamRef = useRef(null); // LocalDataStreamã®å‚ç…§ã‚’ä¿æŒ\r\n  // ãƒã‚¤ã‚¯ã®çŠ¶æ…‹ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®çŠ¶æ…‹ (ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚’ç®¡ç†)\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  // ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã®Publicationã‚’ä¿æŒã™ã‚‹ãŸã‚ã®å‚ç…§\r\n  const audioPublicationRef = useRef(null);\r\n  // ç¾åœ¨ã®è¨€èªçŠ¶æ…‹ ('japanese' ã¾ãŸã¯ 'english')\r\n  const [currentLanguage, setCurrentLanguage] = useState('japanese');\r\n  // AIãƒ¢ãƒ¼ãƒ‰ãŒONã‹ã©ã†ã‹ã‚’ç®¡ç†ã™ã‚‹çŠ¶æ…‹\r\n  const [isAiModeOn, setIsAiModeOn] = useState(false);\r\n  // AIã‹ã‚‰ã®ææ¡ˆã‚’ä¿æŒã™ã‚‹çŠ¶æ…‹\r\n  // { key: 'ai_suggestion_1', text: 'ææ¡ˆå†…å®¹' } ã®å½¢å¼ã§æ ¼ç´\r\n  const [aiSuggestions, setAiSuggestions] = useState([null, null]); // 2ã¤ã®ææ¡ˆã‚’ä¿æŒã™ã‚‹ãŸã‚ã€åˆæœŸå€¤ã‚’nullã§åŸ‹ã‚ã‚‹\r\n  // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãŒé€²è¡Œä¸­ã‹ã©ã†ã‹ã‚’ç®¡ç†ã™ã‚‹çŠ¶æ…‹\r\n  const [isMoveInProgress, setIsMoveInProgress] = useState(false);\r\n\r\n\r\n  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã®å¤šè¨€èªãƒãƒƒãƒ”ãƒ³ã‚°\r\n  const messages = useMemo(() => ({\r\n    hello: {\r\n      japanese: 'ãƒªã‚»ãƒƒãƒˆ',\r\n      english: 'Hello'\r\n    },\r\n    goodbye: {\r\n      japanese: 'æ±ºã‚ãƒãƒ¼ã‚º',\r\n      english: 'Goodbye'\r\n    },\r\n    bow: {\r\n      japanese: 'ãƒã‚¤ãƒã‚¤',\r\n      english: 'Bow'\r\n    },\r\n    flap: {\r\n      japanese: 'YES',\r\n      english: 'Flap'\r\n    },\r\n    lookUp: {\r\n      japanese: 'NO',\r\n      english: 'Look up'\r\n    },\r\n    lookDown: {\r\n      japanese: 'å³æ‰‹ã‚’ä¸Šã’ã‚‹',\r\n      english: 'Look down'\r\n    },\r\n    lookRight: {\r\n      japanese: 'å³æ‰‹ã‚’ä¸‹ã’ã‚‹',\r\n      english: 'Look right'\r\n    },\r\n    lookLeft: {\r\n      japanese: 'å·¦æ‰‹ã‚’ä¸Šã’ã‚‹',\r\n      english: 'Left hand up' // Changed from 'Look left' for clarity\r\n    },\r\n    nod: {\r\n      japanese: 'å·¦æ‰‹ã‚’ä¸‹ã’ã‚‹',\r\n      english: 'Left hand down' // Changed from 'Nod' for clarity\r\n    },\r\n    tiltHead: {\r\n      japanese: 'ä¸Šã‚’å‘ã',\r\n      english: 'Look up' // Changed from 'Tilt head' for clarity\r\n    },\r\n    spin: {\r\n      japanese: 'ä¸‹ã‚’å‘ã',\r\n      english: 'Look down' // Changed from 'Spin' for clarity\r\n    },\r\n    jump: {\r\n      japanese: 'å³ã‚’å‘ã',\r\n      english: 'Look right' // Changed from 'Jump' for clarity\r\n    },\r\n    dance: {\r\n      japanese: 'å·¦ã‚’å‘ã',\r\n      english: 'Look left' // Changed from 'Dance' for clarity\r\n    },\r\n    bowDeep: {\r\n      japanese: 'ãƒ‘ã‚¿ãƒ‘ã‚¿',\r\n      english: 'Flap arms' // Changed from 'Deep bow' for clarity\r\n    },\r\n    doingSomething: {\r\n      japanese: 'ã“ã‚“ã«ã¡ã¯',\r\n      english: 'Hello'\r\n    },\r\n    thankYou: {\r\n      japanese: 'ãƒã‚¤ãƒã‚¤',\r\n      english: 'Goodbye' // Changed from 'Thank you' for clarity\r\n    },\r\n    good: {\r\n      japanese: 'ã‚ˆã†ã“ã',\r\n      english: 'Welcome' // Changed from 'Good' for clarity\r\n    },\r\n    ookini: {\r\n      japanese: 'ã‚ã‚ŠãŒã¨ã†',\r\n      english: 'Thank you (Kansai dialect)'\r\n    },\r\n    amazing: {\r\n      japanese: 'æ¥½ã—ã‚“ã§ã­',\r\n      english: 'Enjoy' // Changed from 'Amazing' for clarity\r\n    }\r\n  }), []);\r\n\r\n\r\n  /**\r\n   * ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ãƒãƒ³ãƒ‰ãƒ©\r\n   */\r\n  const handleLogout = () => {\r\n    setIsLoggedIn(false); // ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’falseã«è¨­å®š\r\n  };\r\n\r\n  // SkyWay App ID ã¨ Secret Key\r\n  // æ³¨æ„: æœ¬ç•ªç’°å¢ƒã§ã¯ã€ã“ã‚Œã‚‰ã®ã‚­ãƒ¼ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã›ãšã€\r\n  // ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«å®‰å…¨ã«æ¸¡ã™ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚\r\n  const appId = useMemo(() => \"4490dcb5-dbe8-4028-ba0a-6d0d143e4515\", []);\r\n  const secretKey = useMemo(() => \"40HHGEIOx0BRByPdxqwUswK0a+7v2JaeaJ9CcFjMdAQ=\", []);\r\n\r\n  // SkyWayèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã®ç”Ÿæˆ\r\n  const token = useMemo(() => {\r\n    if (appId == null || secretKey == null) return undefined;\r\n\r\n    return new SkyWayAuthToken({\r\n      jti: uuidV4(), // JWT ID\r\n      iat: nowInSec(), // ç™ºè¡Œæ™‚åˆ»\r\n      exp: nowInSec() + 60 * 60 * 24, // æœ‰åŠ¹æœŸé™ (24æ™‚é–“)\r\n      version: 3,\r\n      scope: {\r\n        appId: appId,\r\n        rooms: [\r\n          {\r\n            name: \"*\", // ã™ã¹ã¦ã®ãƒ«ãƒ¼ãƒ åã«é©ç”¨\r\n            methods: [\"create\", \"close\", \"updateMetadata\"], // ãƒ«ãƒ¼ãƒ æ“ä½œã®æ¨©é™\r\n            member: {\r\n              name: \"*\", // ã™ã¹ã¦ã®ãƒ¡ãƒ³ãƒãƒ¼ã«é©ç”¨\r\n              methods: [\"publish\", \"subscribe\", \"updateMetadata\"] // ãƒ¡ãƒ³ãƒãƒ¼æ“ä½œã®æ¨©é™\r\n            }\r\n          }],\r\n        turn: {\r\n          enabled: true // TURNã‚µãƒ¼ãƒãƒ¼ã®ä½¿ç”¨ã‚’è¨±å¯ (NATè¶Šãˆã®ãŸã‚)\r\n        }\r\n      }\r\n    }).encode(secretKey);\r\n\r\n  }, [appId, secretKey]);\r\n\r\n  /**\r\n   * SkyWayContextã®åˆæœŸåŒ–ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’è¡Œã†useEffect\r\n   * ãƒˆãƒ¼ã‚¯ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã«ãªã£ãŸã¨ãã«ä¸€åº¦ã ã‘å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚\r\n   */\r\n  useEffect(() => {\r\n    if (!token) return;\r\n\r\n    let currentContext;\r\n    const initContext = async () => {\r\n      try {\r\n        currentContext = await SkyWayContext.Create(token);\r\n        setSkywayContext(currentContext);\r\n        console.log(\"SkyWayContext created successfully.\");\r\n      } catch (error) {\r\n        console.error(\"Failed to create SkyWayContext:\", error);\r\n      }\r\n    };\r\n\r\n    initContext();\r\n\r\n    // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç ´æ£„\r\n    return () => {\r\n      if (currentContext) {\r\n        currentContext.dispose();\r\n        console.log(\"SkyWayContext disposed.\");\r\n      }\r\n    };\r\n  }, [token]); // tokenãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«ã®ã¿å®Ÿè¡Œ\r\n\r\n  /**\r\n   * ãƒªãƒ¢ãƒ¼ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’DOMã«è¿½åŠ ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°\r\n   * @param {RemoteVideoStream | RemoteAudioStream} stream - è¿½åŠ ã™ã‚‹ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒªãƒ¼ãƒ \r\n   * @param {string} memberId - ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ãƒ¼ã®ãƒ¡ãƒ³ãƒãƒ¼ID\r\n   */\r\n  const attachRemoteStream = (stream, memberId) => {\r\n    if (robotDisplayRef.current && (stream instanceof RemoteVideoStream || stream instanceof RemoteAudioStream)) {\r\n      // æ—¢å­˜ã®ãƒ“ãƒ‡ã‚ªè¦ç´ ãŒã‚ã‚Œã°å‰Šé™¤\r\n      const existingVideo = remoteVideoElements.current.get(memberId);\r\n      if (existingVideo) {\r\n        robotDisplayRef.current.removeChild(existingVideo);\r\n        remoteVideoElements.current.delete(memberId);\r\n      }\r\n\r\n      const video = document.createElement(\"video\");\r\n      video.autoplay = true; // è‡ªå‹•å†ç”Ÿ\r\n      video.playsInline = true; // ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å†ç”Ÿ (iOSãªã©ã§å¿…è¦)\r\n      video.className = \"remote-video object-cover\"; // ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ç”¨ã®ã‚¯ãƒ©ã‚¹ã¨object-coverã‚’è¿½åŠ \r\n      video.dataset.memberId = memberId; // ãƒ¡ãƒ³ãƒãƒ¼IDã‚’ãƒ‡ãƒ¼ã‚¿å±æ€§ã«ä¿å­˜\r\n      stream.attach(video); // ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ãƒ“ãƒ‡ã‚ªè¦ç´ ã®ã‚½ãƒ¼ã‚¹ã«è¨­å®š\r\n      robotDisplayRef.current.appendChild(video);\r\n      remoteVideoElements.current.set(memberId, video);\r\n      console.log(`Attached stream from ${memberId} to DOM.`);\r\n    } else {\r\n      console.warn(`Attempted to attach non-media stream or robotDisplayRef is null for member ${memberId}.`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å—ä¿¡ã‚’å‡¦ç†ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°\r\n   * @param {RemoteDataStream} stream - å—ä¿¡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ \r\n   * @param {string} memberId - ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ£ãƒ¼ã®ãƒ¡ãƒ³ãƒãƒ¼ID\r\n   */\r\n  const handleDataStream = (stream, memberId) => {\r\n    if (stream instanceof RemoteDataStream) {\r\n      stream.onData.add((data) => {\r\n        console.log(`Received data from ${memberId}:`, data);\r\n        // å—ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’çŠ¶æ…‹ã«è¿½åŠ \r\n        setReceivedMessages(prevMessages => [...prevMessages, { senderId: memberId, message: data }]);\r\n\r\n        // \"move_finish\" ã‚·ã‚°ãƒŠãƒ«ã‚’ãƒã‚§ãƒƒã‚¯\r\n        if (data === \"move_finish\") {\r\n          console.log(\"Received 'move_finish' signal. Enabling side panel buttons.\");\r\n          setIsMoveInProgress(false); // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†\r\n        }\r\n\r\n        // AIææ¡ˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ãƒã‚§ãƒƒã‚¯\r\n        // æ–°ã—ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ \"ai_assist_1:data:ai_assist_2:data\" ã‚’è§£æ\r\n        const aiCombinedSuggestionRegex = /^ai_assist_1:(.*):ai_assist_2:(.*)$/;\r\n        const combinedMatch = String(data).match(aiCombinedSuggestionRegex);\r\n\r\n        if (combinedMatch) {\r\n          const suggestion1Content = combinedMatch[1]; // ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚°ãƒ«ãƒ¼ãƒ—1ãŒæœ€åˆã®ææ¡ˆ\r\n          const suggestion2Content = combinedMatch[2]; // ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚°ãƒ«ãƒ¼ãƒ—2ãŒ2ç•ªç›®ã®ææ¡ˆ\r\n\r\n          setAiSuggestions([\r\n            { key: 'ai_suggestion_1', text: suggestion1Content },\r\n            { key: 'ai_suggestion_2', text: suggestion2Content }\r\n          ]);\r\n          console.log(\"Received combined AI suggestions.\");\r\n        } else {\r\n          // ä»¥å‰ã®å˜ä¸€ææ¡ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚‚è€ƒæ…®ã™ã‚‹å ´åˆï¼ˆã‚‚ã—ä¸¡æ–¹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒæ··åœ¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãªã‚‰ï¼‰\r\n          const aiSingleSuggestionRegex = /^ai_assist_(\\d+):(.*)$/;\r\n          const singleMatch = String(data).match(aiSingleSuggestionRegex);\r\n\r\n          if (singleMatch) {\r\n            const suggestionNumber = parseInt(singleMatch[1], 10);\r\n            const suggestionContent = singleMatch[2];\r\n\r\n            if (suggestionNumber === 1 || suggestionNumber === 2) {\r\n              setAiSuggestions(prevSuggestions => {\r\n                const newSuggestions = [...prevSuggestions];\r\n                newSuggestions[suggestionNumber - 1] = {\r\n                  key: `ai_suggestion_${suggestionNumber}`,\r\n                  text: suggestionContent\r\n                };\r\n                return newSuggestions;\r\n              });\r\n              console.log(`Received single AI suggestion ${suggestionNumber}.`);\r\n            }\r\n          }\r\n        }\r\n      });\r\n      console.log(`Listening for data from ${memberId}.`);\r\n    } else {\r\n      console.warn(`Attempted to handle non-data stream as data stream for member ${memberId}.`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã™ã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   * SkyWayContextãŒåˆæœŸåŒ–ã•ã‚Œã€ãƒ«ãƒ¼ãƒ åãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚\r\n   */\r\n  const handleJoinRoom = async () => {\r\n    if (!skywayContext) {\r\n      console.error(\"SkyWayContext is not initialized. Please wait or check token.\");\r\n      return;\r\n    }\r\n    if (!roomName) {\r\n      console.error(\"Room name is empty. Please enter a room name to join.\");\r\n      return;\r\n    }\r\n    if (skywayRoom && me) {\r\n      console.warn(\"Already in a room. Please leave the current room first.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // æŒ‡å®šã•ã‚ŒãŸãƒ«ãƒ¼ãƒ åã§P2Pãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã¾ãŸã¯æ¤œç´¢\r\n      const room = await SkyWayRoom.FindOrCreate(skywayContext, {\r\n        type: \"p2p\", // P2Pãƒ«ãƒ¼ãƒ ã‚¿ã‚¤ãƒ—\r\n        name: roomName,\r\n      });\r\n\r\n      // roomã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª\r\n      if (!room) {\r\n        console.error(\"SkyWayRoom.FindOrCreate returned null or undefined room.\");\r\n        throw new Error(\"Failed to create or find SkyWayRoom.\");\r\n      }\r\n\r\n      setSkywayRoom(room);\r\n      console.log(`SkyWayRoom '${roomName}' found or created.`);\r\n\r\n      // ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã€è‡ªåˆ†ã®ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’å–å¾—\r\n      const localMember = await room.join();\r\n      // localMemberãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª\r\n      if (!localMember) {\r\n        console.error(\"room.join() returned null or undefined localMember.\");\r\n        throw new Error(\"Failed to join the room.\");\r\n      }\r\n      setMe(localMember);\r\n      console.log(`Joined room '${roomName}' as member ID: ${localMember.id}`);\r\n      // ãƒ«ãƒ¼ãƒ IDã¨è‡ªåˆ†ã®IDã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤º\r\n      console.log(`Room ID: ${roomName} / My ID: ${localMember.id}`);\r\n\r\n\r\n      // è‡ªåˆ†ã®ã‚«ãƒ¡ãƒ©ã¨ãƒã‚¤ã‚¯ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œæˆã—ã€å…¬é–‹\r\n      const { audio, video } = await SkyWayStreamFactory.createMicrophoneAudioAndCameraStream();\r\n      localStreamRef.current = video; // ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä¿å­˜\r\n      await localMember.publish(video);\r\n      const publication_audio = await localMember.publish(audio);\r\n      audioPublicationRef.current = publication_audio; // ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªPublicationã‚’ä¿å­˜\r\n      setIsMuted(false);\r\n      console.log(\"Published local camera and microphone stream.\");\r\n\r\n      // è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä½œæˆã—ã€å…¬é–‹\r\n      const dataStream = await SkyWayStreamFactory.createDataStream();\r\n      localDataStreamRef.current = dataStream; // ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ä¿å­˜\r\n      await localMember.publish(dataStream);\r\n      console.log(\"Published local data stream.\");\r\n\r\n      // ãƒ«ãƒ¼ãƒ å‚åŠ æ™‚ã¯ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹ï¼ˆãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã¾ã å§‹ã¾ã£ã¦ã„ãªã„ãŸã‚ï¼‰\r\n      setIsMoveInProgress(false);\r\n\r\n\r\n      // --- æ—¢å­˜ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è³¼èª­ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ ---\r\n      // ãƒ«ãƒ¼ãƒ å†…ã®æ—¢å­˜ã®å…¬é–‹ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’ã™ã¹ã¦è³¼èª­ã™ã‚‹\r\n      for (const publication of room.publications) {\r\n        // è‡ªåˆ†ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯è³¼èª­ã—ãªã„\r\n        if (localMember.id === publication.publisher.id) {\r\n          continue;\r\n        }\r\n        try {\r\n          const { stream } = await localMember.subscribe(publication.id);\r\n          console.log(`Subscribed to existing stream from ${publication.publisher.id}, type: ${publication.contentType}`);\r\n\r\n          if (publication.contentType === 'video' || publication.contentType === 'audio') {\r\n            attachRemoteStream(stream, publication.publisher.id);\r\n          } else if (publication.contentType === 'data') {\r\n            handleDataStream(stream, publication.publisher.id);\r\n          } else {\r\n            console.warn(`Unknown stream content type: ${publication.contentType} from ${publication.publisher.id}`);\r\n          }\r\n        } catch (subscribeError) {\r\n          console.error(`Failed to subscribe to existing stream from ${publication.publisher.id}:`, subscribeError);\r\n        }\r\n      }\r\n\r\n      // --- ãƒ«ãƒ¼ãƒ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š ---\r\n\r\n      // ãƒ¡ãƒ³ãƒãƒ¼ãŒãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ\r\n      if (room.onMemberJoined) {\r\n        room.onMemberJoined.add((e) => {\r\n          console.log(`Member joined: ${e.member.id}`);\r\n        });\r\n      } else {\r\n        console.error(\"room.onMemberJoined is undefined. This is unexpected.\");\r\n      }\r\n\r\n      // ãƒ¡ãƒ³ãƒãƒ¼ãŒãƒ«ãƒ¼ãƒ ã‚’é›¢è„±ã—ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ\r\n      if (room.onMemberLeft) {\r\n        room.onMemberLeft.add((e) => {\r\n          console.log(`Member left: ${e.member.id}`);\r\n          // è©²å½“ãƒ¡ãƒ³ãƒãƒ¼ã®ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’DOMã‹ã‚‰å‰Šé™¤ã—ã€Mapã‹ã‚‰ã‚‚å‰Šé™¤\r\n          const videoElement = remoteVideoElements.current.get(e.member.id);\r\n          if (videoElement && robotDisplayRef.current) {\r\n            robotDisplayRef.current.removeChild(videoElement);\r\n            remoteVideoElements.current.delete(e.member.id);\r\n            console.log(`Removed video for member ${e.member.id}`);\r\n          }\r\n          // ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ é–¢é€£ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚‚ã“ã“ã«è¿½åŠ å¯èƒ½ã§ã™ãŒã€\r\n          // onDataãƒªã‚¹ãƒŠãƒ¼ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã¨è‡ªå‹•çš„ã«åœæ­¢ã—ã¾ã™ã€‚\r\n        });\r\n      } else {\r\n        console.error(\"room.onMemberLeft is undefined. This is unexpected.\");\r\n      }\r\n\r\n      // ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒå…¬é–‹ã•ã‚ŒãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ\r\n      if (room.onStreamPublished) {\r\n        room.onStreamPublished.add(async (e) => {\r\n          console.log(`Stream published by ${e.publication.publisher.id}, type: ${e.publication.contentType}`);\r\n          // è‡ªåˆ†ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯è³¼èª­ã—ãªã„\r\n          if (localMember.id !== e.publication.publisher.id) {\r\n            try {\r\n              // ãƒªãƒ¢ãƒ¼ãƒˆã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è³¼èª­\r\n              const { stream } = await localMember.subscribe(e.publication.id);\r\n              console.log(`Subscribed to stream from ${e.publication.publisher.id}`);\r\n\r\n              if (e.publication.contentType === 'video' || e.publication.contentType === 'audio') {\r\n                attachRemoteStream(stream, e.publication.publisher.id);\r\n              } else if (e.publication.contentType === 'data') {\r\n                handleDataStream(stream, e.publication.publisher.id);\r\n              } else {\r\n                console.warn(`Unknown stream content type: ${e.publication.contentType} from ${e.publication.publisher.id}`);\r\n              }\r\n            } catch (subscribeError) {\r\n              console.error(`Failed to subscribe to stream from ${e.publication.publisher.id}:`, subscribeError);\r\n            }\r\n          } else {\r\n            console.log(`Skipping subscription for own stream: ${e.publication.publisher.id}`);\r\n          }\r\n        });\r\n      } else {\r\n        console.error(\"room.onStreamPublished is undefined. This is unexpected.\");\r\n      }\r\n\r\n      // ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒéå…¬é–‹ã«ãªã£ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆ\r\n      if (room.onStreamUnpublished) {\r\n        room.onStreamUnpublished.add((e) => {\r\n          console.log(`Stream unpublished by ${e.publication.publisher.id}`);\r\n          // è©²å½“ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’DOMã‹ã‚‰å‰Šé™¤ã—ã€Mapã‹ã‚‰ã‚‚å‰Šé™¤\r\n          const videoElement = remoteVideoElements.current.get(e.publication.publisher.id);\r\n          if (videoElement && robotDisplayRef.current) {\r\n            robotDisplayRef.current.removeChild(videoElement);\r\n            remoteVideoElements.current.delete(e.publication.publisher.id);\r\n            console.log(`Removed unpublished video for member ${e.publication.publisher.id}`);\r\n          }\r\n        });\r\n      } else {\r\n        console.error(\"room.onStreamUnpublished is undefined. This is unexpected.\");\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(\"Failed to join room:\", error);\r\n      // ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦å†è©¦è¡Œå¯èƒ½ã«ã™ã‚‹\r\n      setSkywayRoom(null);\r\n      setMe(null);\r\n      // ã‚¨ãƒ©ãƒ¼æ™‚ã«æ—¢å­˜ã®ãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—\r\n      if (robotDisplayRef.current) {\r\n        Array.from(robotDisplayRef.current.children).forEach(child => {\r\n          if (child.tagName === 'VIDEO') {\r\n            // ãƒ“ãƒ‡ã‚ªè¦ç´ ã®srcObjectã‚’ã‚¯ãƒªã‚¢ã—ã€ãƒˆãƒ©ãƒƒã‚¯ã‚’åœæ­¢\r\n            if (child.srcObject && typeof child.srcObject.getTracks === 'function') {\r\n              child.srcObject.getTracks().forEach(track => track.stop());\r\n              child.srcObject = null;\r\n            }\r\n            child.remove(); // DOMã‹ã‚‰è¦ç´ ã‚’å‰Šé™¤\r\n          }\r\n        });\r\n      }\r\n      remoteVideoElements.current.clear();\r\n      if (localStreamRef.current) {\r\n        // LocalVideoStreamã®stop()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™\r\n        if (typeof localStreamRef.current.stop === 'function') {\r\n          localStreamRef.current.stop();\r\n          console.log(\"Stopped local media stream during join error cleanup.\");\r\n        } else {\r\n          console.warn(\"localStreamRef.current is not a valid LocalVideoStream or stop is not a function during join error cleanup.\");\r\n        }\r\n        localStreamRef.current = null;\r\n      }\r\n      // LocalDataStreamã¯è‡ªå‹•çš„ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ãŸã‚ã€æ˜ç¤ºçš„ãªclose()ã¯ä¸è¦\r\n      localDataStreamRef.current = null; // å‚ç…§ã‚’ã‚¯ãƒªã‚¢\r\n      console.log(\"Local data stream reference cleared during join error cleanup.\");\r\n\r\n      // ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚‚ãƒªã‚»ãƒƒãƒˆ\r\n      setIsMuted(false);\r\n      audioPublicationRef.current = null;\r\n      setIsMoveInProgress(false); // ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ãƒ«ãƒ¼ãƒ ã‹ã‚‰é€€å‡ºã™ã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   */\r\n  const handleLeaveRoom = async () => {\r\n    if (skywayRoom && me) {\r\n      try {\r\n        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’åœæ­¢ã—ã€å…¬é–‹ã‚’è§£é™¤\r\n        if (localStreamRef.current) {\r\n          // LocalVideoStreamã®stop()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™\r\n          if (typeof localStreamRef.current.stop === 'function') {\r\n            localStreamRef.current.stop();\r\n            console.log(\"Stopped local media stream.\");\r\n          } else {\r\n            console.warn(\"localStreamRef.current is not a valid LocalVideoStream or stop is not a function during leave.\");\r\n          }\r\n          localStreamRef.current = null;\r\n        }\r\n        // LocalDataStreamã¯è‡ªå‹•çš„ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ãŸã‚ã€æ˜ç¤ºçš„ãªclose()ã¯ä¸è¦\r\n        localDataStreamRef.current = null; // å‚ç…§ã‚’ã‚¯ãƒªã‚¢\r\n        console.log(\"Local data stream reference cleared.\");\r\n\r\n        // ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªPublicationã®å‚ç…§ã‚’ã‚¯ãƒªã‚¢\r\n        audioPublicationRef.current = null;\r\n        setIsMuted(false); // ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\r\n\r\n        await me.leave(); // ãƒ«ãƒ¼ãƒ ã‹ã‚‰é€€å‡º\r\n        console.log(`Left room '${roomName}'`);\r\n        // ãƒ«ãƒ¼ãƒ é€€å‡ºã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤º\r\n        console.log(`Left room: ${roomName}`);\r\n\r\n\r\n        // room.dispose()ã‚’ä½¿ç”¨\r\n        if (skywayRoom) {\r\n          await skywayRoom.dispose(); // ãƒ«ãƒ¼ãƒ ã‚’é–‰ã˜ã‚‹ (ã“ã‚Œã¯ãƒ«ãƒ¼ãƒ ã®ä½œæˆè€…ã®ã¿ãŒåŠ¹æœçš„ã§ã™)\r\n          console.log(\"SkyWay Room disposed.\");\r\n        }\r\n        // SkyWay SDKã«é–¢ã™ã‚‹ã™ã¹ã¦ã®æ“ä½œãŒä¸è¦ã«ãªã£ãŸå ´åˆã«context.dispose()ã‚’å‘¼ã³å‡ºã™\r\n        // ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹éš›ã«useEffectã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—é–¢æ•°ã§å‡¦ç†ã•ã‚Œã‚‹ãŸã‚ã€ã“ã“ã§ã¯å‘¼ã³å‡ºã•ãªã„\r\n\r\n      } catch (error) {\r\n        console.error(\"Failed to leave room:\", error);\r\n      } finally {\r\n        // çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\r\n        setMe(null);\r\n        setSkywayRoom(null);\r\n        setReceivedMessages([]); // å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚ã‚¯ãƒªã‚¢\r\n        // ã™ã¹ã¦ã®ãƒªãƒ¢ãƒ¼ãƒˆãƒ“ãƒ‡ã‚ªè¦ç´ ã‚’DOMã‹ã‚‰å‰Šé™¤\r\n        if (robotDisplayRef.current) {\r\n          Array.from(robotDisplayRef.current.children).forEach(child => {\r\n            if (child.tagName === 'VIDEO') {\r\n              // ãƒ“ãƒ‡ã‚ªè¦ç´ ã®srcObjectã‚’ã‚¯ãƒªã‚¢ã—ã€ãƒˆãƒ©ãƒƒã‚¯ã‚’åœæ­¢\r\n              if (child.srcObject && typeof child.srcObject.getTracks === 'function') {\r\n                child.srcObject.getTracks().forEach(track => track.stop());\r\n                child.srcObject = null;\r\n              }\r\n              child.remove(); // DOMã‹ã‚‰è¦ç´ ã‚’å‰Šé™¤\r\n            }\r\n          });\r\n        }\r\n        remoteVideoElements.current.clear();\r\n        // AIãƒ¢ãƒ¼ãƒ‰ã‚‚ã‚ªãƒ•ã«ã™ã‚‹\r\n        setIsAiModeOn(false);\r\n        setAiSuggestions([null, null]); // ææ¡ˆã‚‚ã‚¯ãƒªã‚¢\r\n        setIsMoveInProgress(false); // ãƒ«ãƒ¼ãƒ é€€å‡ºæ™‚ã‚‚ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ“ä½œã™ã‚‹ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸæ™‚ã®å‡¦ç†\r\n   * @param {string | object} messageOrKey - é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚­ãƒ¼ (messagesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚­ãƒ¼) ã¾ãŸã¯AIææ¡ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ\r\n   */\r\n  const handleSend = async (messageOrKey) => {\r\n    if (me && skywayRoom && localDataStreamRef.current) {\r\n      try {\r\n        let messageToSend;\r\n        let shouldSetMoveInProgress = false; // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³é€²è¡Œä¸­ãƒ•ãƒ©ã‚°ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®æ–°ã—ã„å¤‰æ•°\r\n\r\n        if (typeof messageOrKey === 'string') {\r\n          // ã‚µã‚¤ãƒ‰ãƒœã‚¿ãƒ³ã‹ã‚‰ã®é€ä¿¡ã®å ´åˆã€ç›´æ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ–‡å­—åˆ—ã‚’ä½¿ç”¨\r\n          if (messageOrKey.startsWith(\"template_motion_\")) {\r\n            messageToSend = messageOrKey;\r\n            shouldSetMoveInProgress = true; // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã®ã¿ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹\r\n          } else if (messageOrKey.startsWith(\"template_voice_\")) {\r\n            messageToSend = messageOrKey;\r\n            // ãƒœã‚¤ã‚¹ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã¯shouldSetMoveInProgressã‚’trueã«ã—ãªã„\r\n          } else {\r\n            // æ—¢å­˜ã®messagesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã®ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ— (AIææ¡ˆä»¥å¤–ã§ã‚­ãƒ¼ãŒæ¸¡ã•ã‚ŒãŸå ´åˆãªã©)\r\n            messageToSend = messages[messageOrKey]?.[currentLanguage];\r\n          }\r\n        } else if (typeof messageOrKey === 'object' && messageOrKey.text) {\r\n          // AIææ¡ˆãƒœã‚¿ãƒ³ã‹ã‚‰ã®é€ä¿¡\r\n          messageToSend = messageOrKey.text;\r\n          // AIææ¡ˆã®å ´åˆã¯shouldSetMoveInProgressã‚’trueã«ã—ãªã„\r\n        }\r\n\r\n        if (!messageToSend) {\r\n          console.warn(`Message to send is empty or not found.`);\r\n          return;\r\n        }\r\n\r\n        localDataStreamRef.current.write(messageToSend);\r\n        console.log(`Sent message: \"${messageToSend}\"`);\r\n        // é€ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚è‡ªèº«ã®ç”»é¢ã«è¡¨ç¤º\r\n        setReceivedMessages(prevMessages => [...prevMessages, { senderId: me.id, message: messageToSend, isLocal: true }]);\r\n        setAiSuggestions([null, null]); // é€ä¿¡ã—ãŸã‚‰ææ¡ˆã‚’ã‚¯ãƒªã‚¢\r\n\r\n        // shouldSetMoveInProgressãŒtrueã®å ´åˆã®ã¿ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³é€²è¡Œä¸­çŠ¶æ…‹ã«ã™ã‚‹\r\n        if (shouldSetMoveInProgress) {\r\n          setIsMoveInProgress(true);\r\n        }\r\n        // AIææ¡ˆã‚„ãƒœã‚¤ã‚¹ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã¯ã€isMoveInProgressã¯å¤‰æ›´ã—ãªã„\r\n        // (ä»¥å‰ã®ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãŒé€²è¡Œä¸­ã§ã‚ã‚Œã°ãã®ã¾ã¾ã€ãã†ã§ãªã‘ã‚Œã°falseã®ã¾ã¾)\r\n\r\n      } catch (error) {\r\n        console.error(\"Failed to send data:\", error);\r\n      }\r\n    } else {\r\n      console.warn(\"Cannot send message: Not in a room, 'me' object is not available, or data stream is not ready.\");\r\n    }\r\n  };\r\n\r\n  /**\r\n   * ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆ/ãƒŸãƒ¥ãƒ¼ãƒˆè§£é™¤ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   */\r\n  const handleMute = async () => {\r\n    console.log(\"start\");\r\n    if (!audioPublicationRef.current) {\r\n      console.warn(\"Audio publication not available. Cannot toggle mute.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (isMuted) {\r\n        // ç¾åœ¨ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ãªã‚‰ã€ãƒŸãƒ¥ãƒ¼ãƒˆã‚’è§£é™¤\r\n        await audioPublicationRef.current.enable();\r\n        console.log(\"Microphone unmuted.\");\r\n      } else {\r\n        // ç¾åœ¨ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã§ãªã„ãªã‚‰ã€ãƒŸãƒ¥ãƒ¼ãƒˆ\r\n        await audioPublicationRef.current.disable();\r\n        console.log(\"Microphone muted.\");\r\n      }\r\n      setIsMuted(!isMuted); // ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«\r\n    } catch (error) {\r\n      console.error(\"Failed to toggle microphone mute state:\", error);\r\n    }\r\n  };\r\n\r\n  // AIãƒ¢ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡ã™ã‚‹ãŸã‚ã®ãƒ•ãƒ©ã‚°\r\n  const isInitialAiModeRender = useRef(true);\r\n\r\n  /**\r\n   * AIãƒ¢ãƒ¼ãƒ‰ã®çŠ¶æ…‹å¤‰æ›´ã‚’ç›£è¦–ã—ã€ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡ã™ã‚‹useEffect\r\n   */\r\n  useEffect(() => {\r\n    // åˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ã¯ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡ã—ãªã„\r\n    if (isInitialAiModeRender.current) {\r\n      isInitialAiModeRender.current = false;\r\n      return;\r\n    }\r\n\r\n    // me ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª\r\n    if (!me || !localDataStreamRef.current) {\r\n      return;\r\n    }\r\n\r\n    if (isAiModeOn) {\r\n      // AIãƒ¢ãƒ¼ãƒ‰ãŒONã«ãªã£ãŸã‚‰ã€AIã«ææ¡ˆã‚’è¦æ±‚ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡\r\n      localDataStreamRef.current.write(\"ai_assist_on\");\r\n      console.log(\"Sent AI_MODE_REQUEST_SUGGESTIONS signal.\");\r\n      setAiSuggestions([null, null]); // æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãŸã‚ã«ææ¡ˆã‚’ã‚¯ãƒªã‚¢\r\n    } else {\r\n      // AIãƒ¢ãƒ¼ãƒ‰ãŒOFFã«ãªã£ãŸã‚‰ææ¡ˆã‚’ã‚¯ãƒªã‚¢ã—ã€AIãƒ¢ãƒ¼ãƒ‰çµ‚äº†ã®ã‚·ã‚°ãƒŠãƒ«ã‚’é€ä¿¡\r\n      localDataStreamRef.current.write(\"ai_assist_off\");\r\n      console.log(\"Sent AI_MODE_OFF_SIGNAL.\");\r\n      setAiSuggestions([null, null]); // ææ¡ˆã‚’ã‚¯ãƒªã‚¢\r\n    }\r\n  }, [isAiModeOn, me, localDataStreamRef]); // isAiModeOn, me, localDataStreamRef ã®å¤‰æ›´ã«åå¿œ\r\n\r\n  /**\r\n   * è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   */\r\n  const handleToggleLanguage = () => {\r\n    setCurrentLanguage(prevLang => (prevLang === 'japanese' ? 'english' : 'japanese'));\r\n  };\r\n\r\n  /**\r\n   * AIãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãƒãƒ³ãƒ‰ãƒ©\r\n   * ã“ã®é–¢æ•°ã¯AIãƒ¢ãƒ¼ãƒ‰ã®çŠ¶æ…‹ã‚’ãƒˆã‚°ãƒ«ã™ã‚‹ã®ã¿ã§ã€ã‚·ã‚°ãƒŠãƒ«é€ä¿¡ã¯useEffectã«ä»»ã›ã‚‹\r\n   */\r\n  const handleAiModeToggle = () => {\r\n    setIsAiModeOn(prev => !prev);\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <div className=\"header\">\r\n        <div className=\"header-left\">\r\n          <button className=\"motion-btn\" disabled={isAiModeOn || isMoveInProgress}>ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³</button>\r\n          <span className=\"robot-status\">\r\n            æ“ä½œã—ã¦ã„ã‚‹ãƒ­ãƒœãƒƒãƒˆï¼šRX78-myakumyaku\r\n          </span>\r\n        </div>\r\n        <div className=\"header-right\">\r\n          <button onClick={handleLogout} className=\"logout-btn\">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>\r\n          <button className=\"voice-btn\" disabled={isAiModeOn || isMoveInProgress}>ãƒœã‚¤ã‚¹</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"main-container\">\r\n        <div className=\"side-panel\">\r\n          <div className=\"side-panel-content\">\r\n            {Object.keys(messages).slice(0, 17).map(key => ( // å·¦å´ã®ãƒœã‚¿ãƒ³æ•°ã‚’èª¿æ•´\r\n              <button\r\n                key={key}\r\n                // å·¦å´ã®ãƒœã‚¿ãƒ³ã¯ \"template_motion_ã€‡ã€‡\" å½¢å¼ã§é€ä¿¡\r\n                onClick={() => handleSend(`template_motion_${messages[key].japanese}`)}\r\n                className=\"side-btn\"\r\n                disabled={isAiModeOn || !me || isMoveInProgress} // AIãƒ¢ãƒ¼ãƒ‰ä¸­ã€æœªå‚åŠ ã€ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\r\n              >\r\n                {messages[key].japanese} {/* å¸¸ã«æ—¥æœ¬èªè¡¨ç¤º */}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"main-area\">\r\n          <div className=\"room-controls\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"ãƒ«ãƒ¼ãƒ åã‚’å…¥åŠ›\"\r\n              value={roomName}\r\n              onChange={(e) => setRoomName(e.target.value)}\r\n              className=\"room-input\"\r\n              disabled={!!me} // ãƒ«ãƒ¼ãƒ å‚åŠ ä¸­ã¯å…¥åŠ›ä¸å¯ã«ã™ã‚‹\r\n            />\r\n            {!me ? ( // ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¦ã„ãªã„å ´åˆ\r\n              <button onClick={handleJoinRoom} className=\"join-room-btn\" disabled={!skywayContext || !roomName}>\r\n                ãƒ«ãƒ¼ãƒ ã«å‚åŠ \r\n              </button>\r\n            ) : ( // ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¦ã„ã‚‹å ´åˆ\r\n              <button onClick={handleLeaveRoom} className=\"leave-room-btn\">\r\n                ãƒ«ãƒ¼ãƒ ã‚’é€€å‡º\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"robot-display\" ref={robotDisplayRef}>\r\n            {/* ãƒªãƒ¢ãƒ¼ãƒˆã®ãƒ“ãƒ‡ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ */}\r\n            {/* ãƒ«ãƒ¼ãƒ æƒ…å ±ã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ã€ã“ã“ã§ã¯è¡¨ç¤ºã—ã¾ã›ã‚“ */}\r\n\r\n            {/* AIã‹ã‚‰ã®ææ¡ˆè¡¨ç¤º */}\r\n            {(aiSuggestions[0] || aiSuggestions[1]) && (\r\n              <div className=\"ai-suggestions\">\r\n                {aiSuggestions[0] && (\r\n                  <button\r\n                    onClick={() => handleSend(aiSuggestions[0])}\r\n                    className=\"ai-suggestion-btn\"\r\n                    disabled={isMoveInProgress} // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\r\n                  >\r\n                    {aiSuggestions[0].text}\r\n                  </button>\r\n                )}\r\n                {aiSuggestions[1] && (\r\n                  <button\r\n                    onClick={() => handleSend(aiSuggestions[1])}\r\n                    className=\"ai-suggestion-btn\"\r\n                    disabled={isMoveInProgress} // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\r\n                  >\r\n                    {aiSuggestions[1].text}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"side-panel right\">\r\n          <div className=\"side-panel-content\">\r\n            {Object.keys(messages).slice(14).map(key => ( // å³å´ã®ãƒœã‚¿ãƒ³æ•°ã‚’èª¿æ•´\r\n              <button\r\n                key={key}\r\n                // å³å´ã®ãƒœã‚¿ãƒ³ã¯ \"template_voice_ã€‡ã€‡\" å½¢å¼ã§é€ä¿¡\r\n                onClick={() => handleSend(`template_voice_${messages[key].japanese}`)}\r\n                className=\"side-btn\"\r\n                disabled={isAiModeOn || !me || isMoveInProgress} // AIãƒ¢ãƒ¼ãƒ‰ä¸­ã€æœªå‚åŠ ã€ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\r\n              >\r\n                {messages[key].japanese} {/* å¸¸ã«æ—¥æœ¬èªè¡¨ç¤º */}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"bottom-controls\">\r\n        <button\r\n          className={`control-btn ai-btn ${isAiModeOn ? 'ai-mode-on' : ''}`}\r\n          onClick={handleAiModeToggle}\r\n          disabled={!me} // ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¦ã„ãªã„å ´åˆã¯ç„¡åŠ¹\r\n        >\r\n          ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ {isAiModeOn ? 'ON' : 'OFF'}\r\n        </button>\r\n        <button\r\n          className={`control-btn mic-btn ${isMuted ? 'muted' : ''}`} // ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã«å¿œã˜ã¦ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ \r\n          onClick={handleMute}\r\n          id=\"micBtn\"\r\n          disabled={!me || !audioPublicationRef.current || isAiModeOn} // ãƒ«ãƒ¼ãƒ ã«å‚åŠ ã—ã¦ã„ãªã„ã€ã¾ãŸã¯ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãŒå…¬é–‹ã•ã‚Œã¦ã„ãªã„ã€AIãƒ¢ãƒ¼ãƒ‰ä¸­ã¯ç„¡åŠ¹\r\n        >\r\n          {isMuted ? 'ğŸ”‡ ãƒã‚¤ã‚¯ãƒŸãƒ¥ãƒ¼ãƒˆ' : 'ğŸ¤ ãƒã‚¤ã‚¯ON'} {/* ãƒŸãƒ¥ãƒ¼ãƒˆçŠ¶æ…‹ã«å¿œã˜ã¦ã‚¢ã‚¤ã‚³ãƒ³ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´ */}\r\n        </button>\r\n        <button className=\"control-btn manual-btn\" id=\"manualBtn\" disabled={isAiModeOn || isMoveInProgress}>\r\n          ğŸ“‹ ãƒãƒ‹ãƒ¥ã‚¢ãƒ«\r\n        </button>\r\n        <button\r\n          className=\"control-btn greeting-btn\"\r\n          id=\"languageBtn\"\r\n          onClick={handleToggleLanguage} // è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒãƒ³ãƒ‰ãƒ©ã‚’è¨­å®š\r\n          disabled={isAiModeOn || isMoveInProgress} // AIãƒ¢ãƒ¼ãƒ‰ä¸­ã€ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã¯ç„¡åŠ¹åŒ–\r\n        >\r\n          ğŸ‘‹ {currentLanguage === 'japanese' ? 'ã«ã»ã‚“ã”' : 'English'} {/* ç¾åœ¨ã®è¨€èªã«å¿œã˜ã¦ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´ */}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}